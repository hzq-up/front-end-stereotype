<map version="1.0.0"><node ID="17BB2D7F-EB0C-4C60-8961-FF134C07385A" BACKGROUND_COLOR="#FFFFFF" TEXT="&#21069;&#31471;&#23433;&#20840;&#28431;&#27934;" COLOR="#164355" POSITION="right" STYLE="bubble"><edge COLOR="#FFFFFF" WIDTH="2" /><font NAME="PingFangSC-Light" SIZE="24" /><node ID="338E8A9B-C584-4D7A-B1EE-568F696F4FA6" TEXT="xss(cross site scripting, &#36328;&#31449;&#33050;&#26412;&#25915;&#20987;)" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="6" /><font NAME="HelveticaNeue" SIZE="18" /><node ID="9220B6CE-C06C-4F7A-8ECF-93A0C6A22527" TEXT="&#26041;&#24335;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="E9AB68EC-840B-4345-A240-9C9620530DCC" TEXT="&#24448;&#39029;&#38754;&#37324;&#27880;&#20837;&#24694;&#24847;&#20195;&#30721;&#65292;&#24403;&#29992;&#25143;&#27983;&#35272;&#32593;&#39029;&#26102;&#65292;&#23601;&#20250;&#25191;&#34892;&#24694;&#24847;&#20195;&#30721;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
<node ID="1E1DE2A7-968D-4F6F-959C-9B9C2A2C47BB" TEXT="&#23041;&#32961;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="2B5476BC-986C-4695-9069-3BF1DB5C7038" TEXT="&#30423;&#21462; cookie &#20449;&#24687;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="03436342-095C-45DC-804E-FDF45ECFFA16" TEXT="&#20250;&#35805;&#21163;&#25345;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="B97B5358-3DFC-47F2-B276-37A91AB98A20" TEXT="&#25913;&#21464;&#32593;&#39029;&#20869;&#23481;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="E4095525-3D6D-44C9-90AB-F4A8AFB2F8A6" TEXT="&#24694;&#24847;&#36339;&#36716;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
<node ID="33CACA17-4A0F-44C2-8764-D5F83B1D4AD4" TEXT="&#31867;&#22411;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="B47A077B-55E1-4D55-B558-C59E33E48602" TEXT="&#21453;&#23556;&#22411;&#65288;&#38750;&#25345;&#20037;&#22411;&#65289;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="80B00FE7-83FF-498E-A2E0-64DEEAC43A0D" TEXT="XSS &#33050;&#26412;&#22312; URL &#35831;&#27714;&#21442;&#25968;&#37324;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="3" /><font NAME="HelveticaNeue" SIZE="18" /><node ID="BAA3F7CB-4CBD-49E9-B11D-9E9C8666F207" TEXT="&#35825;&#20351;&#29992;&#25143; &#8220;&#28857;&#20987;&#8221; &#19968;&#20010;&#24694;&#24847;&#38142;&#25509;&#65292;&#25165;&#33021;&#25915;&#20987;&#25104;&#21151;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="2" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
</node>
<node ID="729FDA54-CCBF-4215-9D63-C1C8CB28367C" TEXT="&#23384;&#20648;&#22411;&#65288;&#25345;&#20037;&#22411;&#65289;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="622F72C2-D540-4C6F-8A1C-4449156F9CDE" TEXT="&#24403;&#25915;&#20987;&#32773;&#36755;&#20837;&#19968;&#27573;&#24694;&#24847;&#33050;&#26412;&#21518;&#65292;&#34987;&#26381;&#21153;&#31471;&#25509;&#21463;&#20445;&#23384;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="3517EF68-46E5-4D9A-A3D5-E195F6335B78" TEXT="&#24403;&#29992;&#25143;&#35775;&#38382;&#36825;&#20010;&#39029;&#38754;&#26102;&#65292;&#24694;&#24847;&#33050;&#26412;&#23601;&#20250;&#34987;&#25191;&#34892;&#65292;&#20174;&#32780;&#36896;&#25104;&#28431;&#27934;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="2" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
</node>
<node ID="72335022-1367-4D6D-80E6-02B173C13D98" TEXT="DOM Based" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="HelveticaNeue" SIZE="18" /><node ID="75CDCAA6-2B99-4A3D-B052-34216E94280E" TEXT="&#22522;&#20110; DOM &#30340; XSS&#65292;&#36890;&#36807;&#23545;&#20855;&#20307; DOM &#20195;&#30721;&#36827;&#34892;&#20998;&#26512;&#65292;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;&#26500;&#36896; DOM &#33410;&#28857;&#36827;&#34892; XSS &#36328;&#31449;&#33050;&#26412;&#25915;&#20987;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
</node>
<node ID="CC95150C-75FC-497E-8ADD-7CE5A0916F80" TEXT="&#38450;&#33539;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="81323ADC-B63F-4FEC-B7D6-CC36B26930C2" TEXT="&#36755;&#20837;&#36807;&#28388;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="F95E34CF-EDD9-4531-BE09-77F6A6DC3032" TEXT="&#36755;&#20986;&#32534;&#30721;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="707D4E14-5CD8-4FEF-B963-A0B30B0DBA08" TEXT="httpOnly cookie" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="HelveticaNeue" SIZE="18" /></node>
<node ID="10B0B146-2970-45A0-934A-1EC27EE4BA4F" TEXT="waf&#65288;web &#24212;&#29992;&#38450;&#28779;&#22681;&#65289;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#1286DE" WIDTH="4" /><font NAME="HelveticaNeue" SIZE="18" /></node>
</node>
</node>
<node ID="213DE395-D882-4057-901F-D078CBAC575B" TEXT="csrf&#65288;cross site request forgery, &#36328;&#31449;&#35831;&#27714;&#20266;&#36896;&#65289;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="6" /><font NAME="HelveticaNeue" SIZE="18" /><richcontent TYPE="NOTE"><html><head></head>
<body><p style='color: rgba(0, 0, 233, 1.000000); font: 12px "Songti SC"; text-decoration: underline; -cocoa-font-postscriptname: "STSongti-SC-Regular"; -cocoa-underline: single; '>前端安全：</p><p style='color: rgba(0, 0, 233, 1.000000); font: 12px "Times"; text-decoration: underline; -cocoa-font-postscriptname: "Times-Roman"; -cocoa-underline: single; '>https://sonya1.github.io/2018/05/25/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8.html</p><p></p><p style='color: rgba(0, 0, 233, 1.000000); font: 12px "Songti SC"; text-decoration: underline; -cocoa-font-postscriptname: "STSongti-SC-Regular"; -cocoa-underline: single; -cocoa-underline-color: rgba(0, 0, 233, 1.000000); '>攻击实例：</p><p style='color: rgba(0, 0, 233, 1.000000); font: 12px "Times"; text-decoration: underline; -cocoa-font-postscriptname: "Times-Roman"; -cocoa-underline: single; -cocoa-underline-color: rgba(0, 0, 233, 1.000000); '>https://zhuanlan.zhihu.com/p/30701133</p></body>
</html>
</richcontent>
<node ID="1D519612-976E-45A3-BA7F-A4879EBB88DF" TEXT="&#26041;&#24335;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="51954F5A-0E03-4071-A11A-68EF64B2EFC7" TEXT="&#25915;&#20987;&#32773;&#30423;&#29992;&#29992;&#25143;&#30340;&#36523;&#20221;&#65292;&#20197;&#29992;&#25143;&#30340;&#21517;&#20041;&#21457;&#36865;&#24694;&#24847;&#35831;&#27714;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
<node ID="477BA745-89DD-4C3E-8139-67C6DED01614" TEXT="&#23041;&#32961;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="109F010B-52C4-4597-B364-38C6CE445A63" TEXT="&#20197;&#29992;&#25143;&#21517;&#20041;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="DFA86F3F-4D96-4512-929E-AB30DC7C0377" TEXT="&#21457;&#36865;&#37038;&#20214;" COLOR="#334652" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="71130144-9F48-41CA-A9D7-6FF888F9CD9E" TEXT="&#21457;&#28040;&#24687;" COLOR="#334652" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="52098ECB-D22B-4A24-8DCF-C68B48A051D1" TEXT="&#30423;&#21462;&#20320;&#30340;&#36134;&#21495;" COLOR="#334652" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="D7504CC2-E272-41DC-9D1F-AD71D82CD317" TEXT="&#29978;&#33267;&#20110;&#36141;&#20080;&#21830;&#21697;&#65292;&#34394;&#25311;&#36135;&#24065;&#36716;&#36134;&#31561;" COLOR="#334652" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
</node>
<node ID="3730E015-5595-4803-B2F7-894A17CE0A09" TEXT="&#38450;&#33539;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="B9E9C295-5BFB-4652-80DB-90BDD3563868" TEXT="&#39564;&#35777;&#30721;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="0F2E073A-4D10-4524-BA54-A0FF97482A6D" TEXT="referer check" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="4" /><font NAME="HelveticaNeue" SIZE="18" /><node ID="8EBF980C-8EB3-4AAA-80D1-119B49EB0938" TEXT="&#39564;&#35777;&#20174;&#21738;&#20010;&#39029;&#38754;&#38142;&#25509;&#36807;&#26469;&#30340;&#65292;&#20294;&#26159; xhr &#21487;&#20197;&#20462;&#25913;&#23427;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
<node ID="DF7025D8-8750-42E2-A929-93965D218250" TEXT="anti csrf token" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="4" /><font NAME="HelveticaNeue" SIZE="18" /><node ID="C3346211-7806-4F52-8F31-1FF34E79C5BC" TEXT="&#29983;&#25104;&#19968;&#20010;&#38543;&#26426;&#30340; token&#65292;&#29992;&#25143;&#25552;&#20132;&#26102;&#65292;&#22312;&#26381;&#21153;&#22120;&#31471;&#27604;&#23545;&#19968;&#19979; token &#20540;&#26159;&#21542;&#27491;&#30830;&#65292;&#19981;&#27491;&#30830;&#23601;&#20002;&#24323;&#25481;&#65292;&#27491;&#30830;&#23601;&#39564;&#35777;&#36890;&#36807;" COLOR="#334752" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
</node>
<node ID="D8BB1484-2468-4C5E-AE09-4183DAEAFE25" TEXT="&#27880;&#24847;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="13C70881-A6E8-4B60-B187-09CA8B73144E" TEXT="&#21516;&#28304;&#31574;&#30053;&#19981;&#33021;&#20316;&#20026;&#38450;&#33539; CSRF &#30340;&#26041;&#27861;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="4" /><font NAME="PingFangSC-Regular" SIZE="18" /><richcontent TYPE="NOTE"><html><head></head>
<body><p><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '>SOP </span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>与</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '> ajax</span></p><p><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>对于</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '> ajax </span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>请求，在获得数据之后你能肆意进行</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '> js </span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>操作。这时候虽然同源策略会阻止响应，但依然会发出请求。因为执行响应拦截的是浏览器而不是后端程序。事实上你的请求已经发到服务器并返回了结果，但是迫于安全策略，浏览器不允许你继续进行</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '> js </span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>操作，所以报出你熟悉的</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '> blocked by CORS policy: No &apos;Access-Control-Allow-Origin&apos; header is present on the requested resource.</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>。</span></p><p><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>所以再强调一次，同源策略不能作为防范</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '> CSRF </span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>的方法。</span></p><p><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>不过可以防范</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '> CSRF </span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>的例外还是有的，浏览器并不是让所有请求都发送成功，上述情况仅限于简单请求，相关知识会在下面</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '> CORS </span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>一节详细解释。</span></p><p></p><p><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>作者：</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '>ssshooter</span></p><p><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>链接：</span><span style='color: rgba(58, 58, 58, 1.000000); font: 15px "Helvetica Neue"; -cocoa-font-postscriptname: "HelveticaNeue"; '>https://juejin.im/post/5dc8b2c5f265da4d044e41bb</span></p><p style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>来源：掘金</p><p style='color: rgba(58, 58, 58, 1.000000); font: 15px "PingFang SC"; -cocoa-font-postscriptname: "PingFangSC-Regular"; '>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p></body>
</html>
</richcontent>
<node ID="4176FA55-D55F-4ADD-99A0-03CAD3C60F6D" TEXT="&#31616;&#21333;&#35831;&#27714;&#20173;&#28982;&#21457;&#36865;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /><node ID="BB8FD073-633E-4231-BAC7-1C6EB4A49124" TEXT="&#27983;&#35272;&#22120;&#20351;&#24471;&#36820;&#22238;&#21518;&#19981;&#33021;&#25805;&#20316; js" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="2" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
<node ID="D7F9655D-9190-4ED2-8505-5531F5FCBFE6" TEXT="&#20294;&#20173;&#21487;&#36896;&#25104; csrf" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="2" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
<node ID="3788690C-E1D3-498E-A80F-D75A504C5B76" TEXT="&#38750;&#31616;&#21333;&#35831;&#27714;&#20250;&#34987;&#39044;&#26816;&#25318;&#25130;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="3" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
</node>
<node ID="19A5B8A9-1B27-4290-9A1E-BD29D678A470" TEXT="&#23454;&#20363;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#25BAD1" WIDTH="5" /><font NAME="PingFangSC-Regular" SIZE="18" /><richcontent TYPE="NOTE"><html><head></head>
<body><p style='color: rgba(30, 38, 52, 1.000000); font: bold 14px "Hiragino Sans GB"; -cocoa-font-postscriptname: "HiraginoSansGB-W6"; '>CSRF攻击实例</p><p style='color: rgba(30, 38, 52, 1.000000); font: 18px "Hiragino Sans GB"; -cocoa-font-postscriptname: "HiraginoSansGB-W3"; '>受害者 Bob 在银行有一笔存款，通过对银行的网站发送请求 http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=bob2 可以使 Bob 把 1000000 的存款转到 bob2 的账号下。通常情况下，该请求发送到网站后，服务器会先验证该请求是否来自一个合法的 session，并且该 session 的用户 Bob 已经成功登陆。</p><p style='color: rgba(30, 38, 52, 1.000000); font: 18px "Hiragino Sans GB"; -cocoa-font-postscriptname: "HiraginoSansGB-W3"; '>黑客 Mallory 自己在该银行也有账户，他知道上文中的 URL 可以把钱进行转帐操作。Mallory 可以自己发送一个请求给银行：http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory。但是这个请求来自 Mallory 而非 Bob，他不能通过安全认证，因此该请求不会起作用。</p><p style='color: rgba(30, 38, 52, 1.000000); font: 18px "Hiragino Sans GB"; -cocoa-font-postscriptname: "HiraginoSansGB-W3"; '>这时，Mallory 想到使用 CSRF 的攻击方式，他先自己做一个网站，在网站中放入如下代码： src=”http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory ”，并且通过广告等诱使 Bob 来访问他的网站。当 Bob 访问该网站时，上述 url 就会从 Bob 的浏览器发向银行，而这个请求会附带 Bob 浏览器中的 cookie 一起发向银行服务器。大多数情况下，该请求会失败，因为他要求 Bob 的认证信息。但是，如果 Bob 当时恰巧刚访问他的银行后不久，他的浏览器与银行网站之间的 session 尚未过期，浏览器的 cookie 之中含有 Bob 的认证信息。这时，悲剧发生了，这个 url 请求就会得到响应，钱将从 Bob 的账号转移到 Mallory 的账号，而 Bob 当时毫不知情。等以后 Bob 发现账户钱少了，即使他去银行查询日志，他也只能发现确实有一个来自于他本人的合法请求转移了资金，没有任何被攻击的痕迹。而 Mallory 则可以拿到钱后逍遥法外。</p></body>
</html>
</richcontent>
</node>
</node>
<node ID="C841289E-9AA6-46C5-A0C4-084F93337AEF" TEXT="sql &#27880;&#20837;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#389237" WIDTH="6" /><font NAME="HelveticaNeue" SIZE="18" /></node>
<node ID="6D1E6750-5A96-4199-AEFD-CB65170CD2B2" TEXT="cross iframe trick" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#DC2128" WIDTH="6" /><font NAME="HelveticaNeue" SIZE="18" /></node>
<node ID="6CEB2340-E05D-4556-9250-89700BFDD81A" TEXT="clickJacking" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#FCB60D" WIDTH="6" /><font NAME="HelveticaNeue" SIZE="18" /></node>
<node ID="0CDC9ACA-A0E8-4978-96BF-F373922E4631" TEXT="&#25991;&#20214;&#19978;&#20256;" COLOR="#344853" POSITION="right" STYLE="fork"><edge COLOR="#922AA4" WIDTH="6" /><font NAME="PingFangSC-Regular" SIZE="18" /></node>
</node>
</map>
